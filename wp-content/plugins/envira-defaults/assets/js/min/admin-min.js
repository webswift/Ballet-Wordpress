jQuery(document).ready(function($){var e;$("a[href$='post-new.php?post_type=envira'], a[href$='post-new.php?post_type=envira_album']").on("click",function(a){if(1==parseInt(envira_defaults.disable_modal))return!0;a.preventDefault(),e=$(this).attr("href");var t=$(this).attr("href").search("envira_album")>-1?"album":"gallery",l=$(this).attr("href").search("envira_album")>-1?envira_defaults.album_default_id:envira_defaults.gallery_default_id;EnviraGalleryModalWindow.content(new EnviraGallerySelectionView({action:t,multiple:!1,sidebar_view:"envira-defaults-"+t+"-sidebar",modal_title:"album"==t?envira_defaults.album_modal_title:envira_defaults.gallery_modal_title,insert_button_label:"album"==t?envira_defaults.album_modal_button_label:envira_defaults.gallery_modal_button_label,prepend_ids:[parseInt(l)],select_ids:[parseInt(l)],onInsert:function(){this.selection.forEach(function(a){return window.location=e+"&envira_defaults_config_id="+a.id,!0})}})),EnviraGalleryModalWindow.open()}),$("body").on("click","input#doaction, input#doaction2",function(e){var a=$(this).attr("id");switch(a){case"doaction":var t=$("select[name=action]").val();if("envira-defaults"!=t)return;break;case"doaction2":var t=$("select[name=action2]").val();if("envira-defaults"!=t)return}var l=$("select",$(this)).val(),i=[];if($("tbody#the-list input[type=checkbox]:checked").each(function(e){i.push($(this).val())}),0==i.length)return!1;e.preventDefault();var t=$("body.post-type-envira_album").length>0?"album":"gallery",n="album"==t?envira_defaults.album_default_id:envira_defaults.gallery_default_id;EnviraGalleryModalWindow.content(new EnviraGallerySelectionView({action:t,multiple:!1,sidebar_view:"envira-defaults-"+t+"-bulk-action-sidebar",modal_title:"album"==t?envira_defaults.album_bulk_action_modal_title:envira_defaults.gallery_bulk_action_modal_title,insert_button_label:"album"==t?envira_defaults.album_bulk_action_modal_button_label:envira_defaults.gallery_bulk_action_modal_button_label,prepend_ids:[parseInt(n)],select_ids:[parseInt(n)],onInsert:function(){this.selection.forEach(function(e){$("#message").remove(),$.ajax({url:ajaxurl,type:"post",async:!0,cache:!1,data:{action:"envira_defaults_apply",nonce:envira_defaults.nonce,id:e.id,post_ids:i,post_type:t},success:function(e){$("tbody#the-list input[type=checkbox]").prop("checked",!1),$("div.wrap > h1").after('<div id="message" class="updated notice is-dismissible"><p>Settings applied successfully!</p></div>'),EnviraGalleryModalWindow.close()},error:function(e,a,t){$("div.wrap > h1").after('<div id="message" class="error notice is-dismissible"><p>Error: '+a+"</p></div>"),EnviraGalleryModalWindow.close()}})})}})),EnviraGalleryModalWindow.open()})});