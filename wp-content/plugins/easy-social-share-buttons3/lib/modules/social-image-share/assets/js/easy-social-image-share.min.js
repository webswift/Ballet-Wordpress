!function(t){function e(){this.$element=null}String.format||(String.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})});var n={transferDataAttributes:function(t,e){var n=t.data();for(var i in n)n.hasOwnProperty(i)&&e.attr("data-"+i,n[i])}};e.prototype.addAttr=function(t,e){this.$element.attr(t,e)},e.prototype.addClass=function(t){this.$element.addClass(t)},window.essbis=function(){function i(n,i,o){e.call(this),this.width=n,this.height=i,this.$element=t("<a/>"),this.addAttr(a.attr.type,o),this.addAttr("href","#"),this.$iconElement=t("<div/>").addClass(a.cssClass.iconPrefix+o),this.$iconElement.html(t("<div/>").addClass(a.cssClass.prefix+"inner"))}function o(e){switch(this.icons=[],this.width=0,this.height=0,this.$element=t("<div/>"),e){case"vertical":this.updateContainerSize=this.updateSizeVertical;break;case"horizontal":this.updateContainerSize=this.updateSizeHorizontal}this.addClass(a.cssClass.container)}function r(){this.url="",this.imageUrl="",this.description=""}i.prototype=new e,i.prototype.createElement=function(){return this.$element.html(this.$iconElement)},o.prototype=new e,o.prototype.updateSizeHorizontal=function(t,e){this.width+=t,this.height=e>this.height?e:this.height},o.prototype.updateSizeVertical=function(t,e){this.height+=e,this.width=t>this.width?t:this.width},o.prototype.createContainer=function(){for(var t=[],e=0;e<this.icons.length;e++)t.push(this.icons[e].createElement());return this.$element.css("min-height",this.height+"px").css("min-width",this.width+"px").html(t)},o.prototype.addIcon=function(t){return this.icons.push(t),this.updateContainerSize(t.width,t.height),this};var s={openWindow:function(t,e,n,i){var o=Math.round(screen.height/2-i/2),r=Math.round(screen.width/2-n/2);window.open(t,e,String.format("width={0},height={1},status=0,toolbar=0,menubar=0,location=1,scrollbars=1,top={2},left={3}",n,i,o,r))}},a={};a.attr={},a.attr.prefix="data-essbis",a.attr.type=a.attr.prefix+"Type",a.attr.postTitle=a.attr.prefix+"PostTitle",a.attr.postUrl=a.attr.prefix+"PostUrl",a.cssClass={},a.cssClass.prefix="essbis-",a.cssClass.container=a.cssClass.prefix+"container",a.cssClass.iconPrefix=a.cssClass.prefix+"icon-",a.buttonTypes={pinterestShare:"pinterest",twitterShare:"twitter",facebookShare:"facebook"},a.clickHandlers={},a.clickHandlers.pinterest=function(t){var e=String.format("http://pinterest.com/pin/create/bookmarklet/?is_video=false&url={0}&media={1}&description={2}",encodeURIComponent(t.url),encodeURIComponent(t.imageUrl),encodeURIComponent(t.description));return s.openWindow(e,"Pinterest",632,453),!1},a.clickHandlers.twitter=function(t){var e="";a.buttonSettings.settings.twitterHandle&&(e=String.format("&via={0}",a.buttonSettings.settings.twitterHandle));var n=String.format("https://twitter.com/intent/tweet?text={0}&url={1}{2}",encodeURIComponent(t.postTitle),encodeURIComponent(t.url),e);return s.openWindow(n,"Twitter",550,470),!1},a.clickHandlers.facebook=function(t){var e=String.format("https://www.facebook.com/sharer/sharer.php?u={0}&display=popup",encodeURIComponent(t.url));return s.openWindow(e,"Facebook",550,420),!1},a.clickHandlers.google=function(t){var e=String.format("https://plus.google.com/share?url={0}",encodeURIComponent(t.url));return s.openWindow(e,"Google",550,420),!1},a.clickHandlers.linkedin=function(t){var e=String.format("http://www.linkedin.com/shareArticle?mini=true&url={0}",encodeURIComponent(t.url));return s.openWindow(e,"LinkedIn",550,420),!1},a.clickHandlers.vkontakte=function(t){var e=String.format("http://vk.com/share.php?noparse=true&url={0}&image={1}&description={2}&title={3}",encodeURIComponent(t.url),encodeURIComponent(t.imageUrl),encodeURIComponent(t.description),encodeURIComponent(t.postTitle));return s.openWindow(e,"VKontakte",632,453),!1},a.clickHandlers.odnoklassniki=function(t){var e=String.format("http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl={0}&st.comments={2}",encodeURIComponent(t.url),encodeURIComponent(t.postTitle));return s.openWindow(e,"Odnoklassniki",632,453),!1},a.clickHandlers.tumblr=function(t){var e=String.format("http://www.tumblr.com/share/photo?click_thru={0}&source={1}&caption={2}",encodeURIComponent(t.url),encodeURIComponent(t.imageUrl),encodeURIComponent(t.description));return s.openWindow(e,"Tumblr",632,453),!1},a.clickHandlers.reddit=function(t){var e=String.format("http://reddit.com/submit?url={0}&title={1}&text={2}",encodeURIComponent(t.url),encodeURIComponent(t.pageTitle),encodeURIComponent(t.description));return s.openWindow(e,"reddit",632,453),!1},a.clickHandlers.digg=function(t){var e=String.format("http://digg.com/submit?phase=2&url={0}&title={1}&bodytext={2}",encodeURIComponent(t.url),encodeURIComponent(t.pageTitle),encodeURIComponent(t.description));return s.openWindow(e,"digg",632,453),!1},a.clickHandlers.delicious=function(t){var e=String.format("http://delicious.com/post?url={0}&title={1}&bodytext={2}",encodeURIComponent(t.url),encodeURIComponent(t.pageTitle));return s.openWindow(e,"delicious",632,453),!1},a.handleStats=function(t){if("undefined"!=typeof essb_settings&&essb_settings.essb3_stats){var e=essb_settings.post_id||"",n=!1,i="onmedia",o="onmedia";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(n=!0);var r=!1,s="icon";"undefined"!=typeof essb_settings&&jQuery.post(essb_settings.ajax_url,{action:"essb_stat_log",post_id:e,service:t,template:i,mobile:n,position:o,button:s,counter:r,nonce:essb_settings.essb3_nonce},function(t){},"json")}},a.debug=function(t){},a.init=function(){var t=window.console=window.console||{};t.log||(t.log=function(){}),a.main.settings.debug=-1!=window.location.search.indexOf("essbisdebug")},a.themes={},a.getTheme=function(t){return a.themes.hasOwnProperty(t)?a.themes[t]:a.themes.flat},a.addTheme=function(t,e){a.themes[t]=e};var d=essbis_settings.modules.buttons.networks.split(",");a.debug(essbis_settings.modules.buttons.networks);for(var u={buttons:{}},l=0;l<d.length;l++){var c=d[l];u.buttons[c]={height:48,width:48}}a.addTheme("flat",u);for(var h={buttons:{}},l=0;l<d.length;l++){var c=d[l];h.buttons[c]={height:36,width:36}}a.addTheme("flat-small",h);for(var m={buttons:{}},l=0;l<d.length;l++){var c=d[l];m.buttons[c]={height:36,width:36}}a.addTheme("round",m);for(var p={buttons:{}},l=0;l<d.length;l++){var c=d[l];p.buttons[c]={height:24,width:24}}return a.addTheme("tiny",p),a.buttonSets={},a.getButtonSet=function(t){return a.buttonSets.hasOwnProperty(t)?a.buttonSets[t]:a.buttonSets["default"]},a.addButtonSet=function(t,e){a.buttonSets[t]=e},a.addButtonSet("default",d),a.moduleNames={main:"settings",hover:"hover",buttonSettings:"buttons"},a.module={},a.main=a.module[a.moduleNames.main]=function(){var e={debug:1},n={};return n.settings=e,n.setSettings=function(n){e=t.extend(e,n)},n}(),a.buttonSettings=a.module[a.moduleNames.buttonSettings]=function(){var e={pinterestImageDescription:["titleAttribute","altAttribute"],twitterHandle:""},n={};return n.settings=e,n.setSettings=function(n){e=t.extend(e,n)},n.settings.pinterestImageDescription=essbis_settings.pinterestImageDescription,n}(),a.module[a.moduleNames.hover]=function(){function e(t,e){o.call(this,t),this.addClass(R.overlay),this.addClass("essbis-orientation-"+t),this.addAttr(T.attr.index,e)}function s(){return++I}function d(t){return t[0].clientHeight>=U.minImageHeight&&t[0].clientWidth>=U.minImageWidth&&t.not(U.disabledClasses).length>0&&t.filter(U.enabledClasses).length>0}function u(t,e){switch(e){case"titleAttribute":return t.attr("title");case"altAttribute":return t.attr("alt");default:return""}}function l(t){for(var e="",n=a.buttonSettings.settings.pinterestImageDescription,i=0;i<n.length&&!e;i++)e=u(t,n[i]);return e}function c(t,e,n){var i=t.parents(String.format("[{0}]",x.postContainer));return i.attr(e)||n}function h(t){return c(t,a.attr.postUrl,document.URL)}function m(t){return c(t,a.attr.postTitle,document.title)}function p(t,e){var n=0,i=0,o=function(){return Math.round(t.height/2-e.height/2)},r=function(){return Math.round(t.height-e.height)},s=function(){return Math.round(t.width/2-e.width/2)},a=function(){return Math.round(t.width-e.width)};switch(U.hoverPanelPosition){case"top-left":n=0,i=0;break;case"top-middle":n=0,i=s();break;case"top-right":n=0,i=a();break;case"middle-left":n=o(),i=0;break;case"middle-middle":n=o(),i=s();break;case"middle-right":n=o(),i=a();break;case"bottom-left":n=r(),i=0;break;case"bottom-middle":n=r(),i=s();break;case"bottom-right":n=r(),i=a()}return{top:n,left:i}}function f(t){return void 0!==t?String.format('div.{0}[{1}="{2}"]',R.overlay,x.index,t):String.format("div.{0}",R.overlay)}function g(){var t=[];return"1"==U.showOnLightbox&&t.push("img.cboxPhoto"),""!=U.imageSelector&&t.push(String.format("{0}:not([{1}])",U.imageSelector,x.ignore)),t.join(",")}function b(t){var e=t.prop("tagName");switch(e.toLowerCase()){case"div":return t.css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");case"img":return t.attr("src");default:return""}}function v(t){var n=U.theme,o=a.getButtonSet(U.buttonSet),r=a.getTheme(n);a.debug(U.orientation);var s=new e(U.orientation,t);s.addClass(n);for(var d=0;d<o.length;d++)s.addIcon(new i(r.buttons[o[d]].width,r.buttons[o[d]].height,o[d]));return s}function w(){var e=t(this);!e.attr(x.index)&&d(e)&&e.attr(x.index,s());var n=e.attr(x.index);if(!n)return void e.attr(x.ignore,"");var i=t(f(n));if(0==i.length){var o=v(n),r=o.createContainer(),a=p({height:e[0].clientHeight,width:e[0].clientWidth},{height:o.height,width:o.width}),u=e.offset(),l={top:u.top+a.top,left:u.left+a.left};e.after(r),r.offset(l).addClass(R.visible)}else C(i)}function S(t){var e=setTimeout(function(){t.removeClass(R.visible),t.attr(x.timeoutId2,setTimeout(function(){t.remove()},600))},100);t.attr(x.timeoutId,e)}function C(t){clearTimeout(t.attr(x.timeoutId2)),clearTimeout(t.attr(x.timeoutId)),t.addClass(R.visible)}function k(){var e=t(this),n=e.attr(a.attr.type);if(void 0===a.clickHandlers[n])return!1;var i=e.parent(String.format("div.{0}",a.cssClass.container)).attr(x.index),o=t(String.format('[{0}="{1}"]',x.index,i)),s=new r;return s.url=h(o),s.imageUrl=b(o),s.description=l(o),s.postTitle=m(o),a.clickHandlers[n].call(e,s),a.handleStats(n),!1}function y(){var e=t(this),i=t();if(U.parentContainerSelector&&(i=e.parents(U.parentContainerSelector).first()),0==i.length){i=e;for(var o=0;o<U.parentContainerLevel;o++)i=i.parent()}i.length>0&&(n.transferDataAttributes(e,i),i.addClass(R.container))}var I=0,x={ignore:a.attr.prefix+"Ignore",imageDescription:a.attr.prefix+"ImageDescription",index:a.attr.prefix+"Index",postContainer:a.attr.prefix+"HoverContainer",timeoutId:a.attr.prefix+"TimeoutId",timeoutId2:a.attr.prefix+"TimeoutId2"},R={visible:"visible",overlay:a.cssClass.prefix+"hover-overlay",container:a.cssClass.prefix+"hover-container"},U={theme:"flat",buttonSet:"default",orientation:"horizontal",hoverPanelPosition:"middle-middle",imageSelector:String.format(".[0] img",R.container),minImageHeight:100,minImageWidth:100,descriptionSource:["titleAttribute","altAttribute"],disabledClasses:".wp-smiley",showOnLightbox:"1",enabledClasses:"*",parentContainerSelector:"",parentContainerLevel:2};e.prototype=new o;var T={};return T.attr=x,T.onReady=function(){t(String.format("input[{0}]",x.postContainer)).each(y),t(document).delegate(g(),"mouseenter",w),t(document).delegate(g(),"mouseleave",function(){var e=t(this).attr(x.index),n=t(f(e));S(n)}),t(document).delegate(String.format("div.{0} a",R.overlay),"click",k),t(document).delegate(f(),"mouseenter",function(){C(t(this))}),t(document).delegate(f(),"mouseleave",function(){S(t(this))})},T.onResize=function(){t(String.format("[{0}]",T.attr.ignore)).each(function(){t(this).removeAttr(T.attr.ignore)}),t(String.format("[{0}]",T.attr.index)).each(function(){t(this).removeAttr(T.attr.index)})},T.setSettings=function(e){U=t.extend(U,e)},T}(),a.setSettings=function(t){a.debug(t);for(var e in t.buttonSets)t.buttonSets.hasOwnProperty(e)&&a.addButtonSet(e,t.buttonSets[e]);for(var n in t.themes)t.themes.hasOwnProperty(n)&&a.addTheme(t.themes[n]);for(var i in t.modules)t.modules.hasOwnProperty(i)&&a.module.hasOwnProperty(i)&&a.module[i].setSettings(t.modules[i])},a.triggerActiveModules=function(t){for(var e in a.module)if(a.module.hasOwnProperty(e)){var n=e.charAt(0).toUpperCase()+e.slice(1),i="module"+n+"Active";a.module.hasOwnProperty(e)&&"function"==typeof a.module[e][t]&&"1"==a.main.settings[i]&&a.module[e][t]()}},a.onReady=function(){a.debug("onReady"),a.triggerActiveModules("onReady")},a.onResize=function(){a.debug("onResize"),a.triggerActiveModules("onResize")},a}(),t(function(){essbis.init(),essbis.setSettings(essbis_settings),essbis.onReady(),t(window).resize(essbis.onResize)})}(jQuery);