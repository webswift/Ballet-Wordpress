function envira_downloads_get_cookie(o){for(var a=o+"=",n=document.cookie.split(";"),e=0;e<n.length;e++){for(var i=n[e];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(a))return i.substring(a.length,i.length)}return""}jQuery(document).ready(function($){$(document).on("click",".envira-download-button a",function(o){if(o.preventDefault(),"block"==$(".envirabox-overlay").css("display")){var a=$("img.envirabox-image").attr("src"),n=$(this).parent().attr("data-envira-downloads-force-download"),e=$("img.envirabox-image").data("envira-gallery-id"),i=$("img.envirabox-image").data("envira-item-id");r="1"==n?location.protocol+"//"+location.host+location.pathname+"?envira-downloads-gallery-id="+e+"&envira-downloads-gallery-image="+i:a}else{var r=$(this).attr("href"),e=$(this).closest(".envira-gallery-public").attr("id").split("-")[2];console.log(e)}if(envira_downloads.password_protection){var t=envira_downloads_get_cookie("envira_password_protection_download_"+e);if(""==t){var d=prompt(envira_downloads.password_required);if(""==d)return!1}else d=t;r+="&envira_password_protection_download="+d}return window.open(r,"_self"),!1}),$("div.envira-gallery-item-inner").hover(function(){$("div.envira-download-button",$(this)).fadeIn()},function(){$("div.envira-download-button",$(this)).fadeOut()})});