function envira_downloads_get_cookie(a){for(var e=a+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}function envira_downloads_getParameterByName(a,e){e||(e=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),n=r.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}jQuery(document).ready(function($){$(document).on("click",".envira-download-button a",function(a){if(a.preventDefault(),$(this).closest(".envira-gallery-wrap").hasClass("envira-dynamic-gallery"))var e="dynamic",r=$(this).attr("href"),n="true";else if($(this).closest(".envirabox-wrap").hasClass("envira-dynamic-gallery")){var o=$("img.envirabox-image").attr("src"),i=$(this).parent().attr("data-envira-downloads-force-download"),e=$("img.envirabox-image").data("envira-gallery-id"),t=$("img.envirabox-image").data("envira-item-id"),n="true";r="1"==i?location.protocol+"//"+location.host+location.pathname+"?envira-downloads-gallery-id="+e+"&envira-downloads-gallery-image="+t+"&envira-dynamic=1":o}else if("block"==$(".envirabox-overlay").css("display")){var o=$("img.envirabox-image").attr("src"),i=$(this).parent().attr("data-envira-downloads-force-download"),e=$("img.envirabox-image").data("envira-gallery-id"),t=$("img.envirabox-image").data("envira-item-id");r="1"==i?location.protocol+"//"+location.host+location.pathname+"?envira-downloads-gallery-id="+e+"&envira-downloads-gallery-image="+t:o}else var r=$(this).attr("href"),e=$(this).closest(".envira-gallery-public").attr("id").split("-")[2];if(envira_downloads.password_protection){if(n)var l=envira_downloads_get_cookie("envira_password_protection_download_dynamic");else var l=envira_downloads_get_cookie("envira_password_protection_download_"+e);if(""==l){var d=prompt(envira_downloads.password_required);if(""==d)return!1}else d=l;if(null==d)return!1;r+="&envira_password_protection_download="+d}return window.open(r,"_self"),!1}),$(document).on("click","a.envira-download-all",function(a){a.preventDefault();var e=$(this).attr("href");if($(this).closest(".envira-gallery-wrap").hasClass("envira-dynamic-gallery"))var r="dynamic",e=$(this).attr("href"),n="true";else{var r=envira_downloads_getParameterByName("envira-downloads-gallery-id",e);if(null==r)return!1}if(envira_downloads.password_protection){var o=envira_downloads_get_cookie("envira_password_protection_download_"+r);if(""==o){var i=prompt(envira_downloads.password_required);if(""==i)return!1}else i=o;if(null==i)return!1;e+="&envira_password_protection_download="+i}return window.open(e,"_self"),!1}),$("div.envira-gallery-item-inner").hover(function(){$("div.envira-download-button",$(this)).fadeIn().css("display","inline-block")},function(){$("div.envira-download-button",$(this)).fadeOut()})});